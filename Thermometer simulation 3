#include<stdio.h>
#include<stdlib.h>
#include<math.h>
#include<time.h>
#include<windows.h>

int main(){
	
	int i;
	int numberofreadings = 24;
	
	double *TemperatureReadings = (double* )malloc (numberofreadings * sizeof(double)); // dynamically allocate memory to be used by the simulation. 
	
	if(TemperatureReadings == NULL){
		printf("Memory allocation failed.");
		return 1;
	}
	
	int Initialtemperature = 25;
	
	srand(time(0));

	for(i=0; i<numberofreadings; i++){
		
		float error;
		
		error = (rand()%1001 / 100.0) - 5.0;
		
		TemperatureReadings[i] = Initialtemperature + error;
		
		time_t current;
		time(&current);
		
		struct tm* local = localtime(&current);
		
		char timestamp[40];
		strftime(timestamp, sizeof(timestamp), "%Y-%m-%d %H:%M:%S", local);
		
		printf("At [%s] Temperature Reading[%d] : %.2f \n", timestamp, i+1, TemperatureReadings[i]);
		
		Sleep (2000);
	}
	
	free (TemperatureReadings); // free the memory being used by the simulation and give it back to the system
	
	return 0;
}
